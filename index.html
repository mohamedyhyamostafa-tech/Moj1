<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>⚔️ الزعيم - لعبة الثعبان الذكية 🐍</title>
<style>
body {
  margin: 0;
  background: radial-gradient(circle at center, #000, #0a0a0a);
  font-family: 'Cairo', sans-serif;
  color: #00ff99;
  text-align: center;
  user-select: none;
}
h1 {
  text-shadow: 0 0 15px #00ff99;
  margin-top: 15px;
}
canvas {
  background: #111;
  display: block;
  margin: 15px auto;
  border: 3px solid #00ff99;
  border-radius: 12px;
  box-shadow: 0 0 25px #00ff99aa;
}
button {
  background: #00ff99;
  color: #000;
  border: none;
  padding: 10px 20px;
  font-weight: bold;
  border-radius: 10px;
  margin: 5px;
  cursor: pointer;
  transition: 0.2s;
}
button:hover {
  background: #0f0;
  transform: scale(1.05);
}
.controls {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: 10px;
}
.row {
  display: flex;
  justify-content: center;
}
.arrow {
  width: 60px;
  height: 60px;
  font-size: 22px;
}
#score {
  margin: 10px;
  font-size: 22px;
  text-shadow: 0 0 10px #00ff99;
}
footer {
  margin-top: 15px;
  color: #666;
  font-size: 14px;
}
</style>
</head>
<body>
  <h1>⚔️ الزعيم 🐍</h1>
  <canvas id="game" width="400" height="400"></canvas>

  <div>
    <button onclick="startGame()">▶️ ابدأ</button>
    <button onclick="pauseGame()">⏸️ توقف</button>
    <button onclick="speedUp()">⚡ سرّع</button>
    <button onclick="slowDown()">🐢 أبطئ</button>
  </div>

  <div class="controls">
    <div class="row"><button class="arrow" onclick="setDir('up')">⬆️</button></div>
    <div class="row">
      <button class="arrow" onclick="setDir('left')">⬅️</button>
      <button class="arrow" onclick="setDir('down')">⬇️</button>
      <button class="arrow" onclick="setDir('right')">➡️</button>
    </div>
  </div>

  <div id="score">النتيجة: 0</div>

  <footer>⚔️ برمجة الزعيم © 2025</footer>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let snake = [{x:10,y:10}];
let food = {x:5,y:5};
let dx=1, dy=0;
let score=0;
let speed=150;
let running=false;
let loop;

function draw() {
  ctx.fillStyle = "black";
  ctx.fillRect(0,0,400,400);

  ctx.fillStyle = "#00ff99";
  snake.forEach(p => ctx.fillRect(p.x*20, p.y*20, 18, 18));

  ctx.fillStyle = "red";
  ctx.fillRect(food.x*20, food.y*20, 18, 18);

  document.getElementById("score").innerText = "النتيجة: " + score;
}

function move() {
  const head = {x:snake[0].x+dx, y:snake[0].y+dy};
  snake.unshift(head);

  if (head.x===food.x && head.y===food.y) {
    score++;
    food={x:Math.floor(Math.random()*20), y:Math.floor(Math.random()*20)};
  } else {
    snake.pop();
  }

  if (head.x<0 || head.x>19 || head.y<0 || head.y>19 ||
      snake.slice(1).some(p=>p.x===head.x && p.y===head.y)) {
    clearInterval(loop);
    running=false;
    alert("💀 انتهت اللعبة! النتيجة: "+score);
    resetGame();
  }

  draw();
}

function startGame() {
  if (!running) {
    running=true;
    loop=setInterval(move,speed);
  }
}
function pauseGame() {
  running=false;
  clearInterval(loop);
}
function speedUp() {
  if (speed>50) speed-=20;
  if (running) {clearInterval(loop); loop=setInterval(move,speed);}
}
function slowDown() {
  speed+=30;
  if (running) {clearInterval(loop); loop=setInterval(move,speed);}
}
function resetGame() {
  snake=[{x:10,y:10}];
  food={x:5,y:5};
  dx=1; dy=0;
  score=0;
  speed=150;
  draw();
}

function setDir(dir){
  if(dir==="up" && dy===0){dx=0;dy=-1;}
  if(dir==="down" && dy===0){dx=0;dy=1;}
  if(dir==="left" && dx===0){dx=-1;dy=0;}
  if(dir==="right" && dx===0){dx=1;dy=0;}
}

document.addEventListener("keydown",e=>{
  if (e.key==="ArrowUp") setDir("up");
  if (e.key==="ArrowDown") setDir("down");
  if (e.key==="ArrowLeft") setDir("left");
  if (e.key==="ArrowRight") setDir("right");
});

draw();
</script>
</body>
</html>
